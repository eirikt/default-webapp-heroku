<!DOCTYPE html>
<!-- build:[manifest]:prod manifest.appcache -->
<html>
<!-- /build -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!-- build:template
    <title><%= name %></title>
    /build -->

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css">
    <!-- build:[href]:prod styles/app.min.css -->
    <link rel="stylesheet" href="styles/app.css">
    <!-- /build -->
</head>
<body>
    <!--[if lt IE 10]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser.
    Please <a href="http://browsehappy.com">upgrade your browser</a> to improve your experience.</p>
    <hr/>
    <![endif]-->

    <div id="content"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script type="text/babel">
        var Header = React.createClass({
                render: function () {
                    return (
                        <header>
                            <section>
                                <section className="title">
                                    <!-- build:template
                                    <%= name %>
                                    /build -->
                                </section>

                                <section className="status-container">
                                    <section>
                                        <section className="network-status-container"></section>
                                        <section className="connection-status-container">
                                            <span className="connected connection-count"></span>
                                        </section>
                                    </section>
                                    <section>
                                        <section className="network-status-container">
                                            <span className="network-status"></span>
                                        </section>
                                        <section className="connection-status-container">
                                            <span className="connection-status"></span>
                                        </section>
                                    </section>
                                </section>
                            </section>
                            <hr/>
                        </header>
                    );
                }
            }),

            MainContentPlaceholder = React.createClass({
                render: function () {
                    return (
                        <section className="watermark">some content ...</section>
                    );
                }
            }),

            Footer = React.createClass({
                render: function () {
                    return (
                        <footer>
                            <hr/>
                            <section>
                               <!-- build:template
                               <span><%= name %> v<%= version %></span>
                               <span>built <%= timestamp %></span>
                               /build -->
                               <span className="development"></span>
                            </section>
                        </footer>
                    );
                }
            }),

            Content = React.createClass({
                render: function () {
                    return (
                        <article className="page">
                            <Header />
                            <MainContentPlaceholder />
                            <Footer />
                        </article>
                    );
                }
            });

        ReactDOM.render(
            <Content />,
            document.getElementById("content")
        );
    </script>

    <!-- build:template
    <script>
        var upgradeMessage = 'A newer version of <%= name %> is available! Load it?';
    </script>
    /build -->

    <!-- build:remove:dev -->
    <script src="scripts/app.min.js"></script>
    <!-- /build -->

    <!-- build:remove:prod -->
    <!-- HTTP server push (with Socket.IO) -->
    <script src="scripts/vendor/socket.io.js"></script>
    <script src="scripts/app-socketio.js"></script>
    <!-- /HTTP server push (with Socket.IO) -->
    <script src="scripts/app-network.js"></script>
    <!-- /build -->

    <script>
        // Do not try to manipulate elements before React has rendered them
        document.onreadystatechange =
            function() {
                switch(document.readyState) {
                    case "complete":
                        console.log("Document :: Event:readyState=complete (The document and all sub-resources have finished loading) ...");
                        updateNetworkStatus();
                        <!-- build:remove:prod -->
                        Array.prototype.forEach.call(document.getElementsByClassName("development"), function(el) {
                            el.innerHTML = "Development configuration";
                        });
                        <!-- /build -->
                    break;
                }
        };
    </script>

    <!-- build:remove:prod -->
    <!-- Automatic reload of page, default URL for 'grunt-contrib-watch' reload server -->
    <script src="//localhost:35729/livereload.js"></script>
    <!-- /build -->
</body>
</html>
